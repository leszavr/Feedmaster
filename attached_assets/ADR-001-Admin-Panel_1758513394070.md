# ADR-001: Архитектура админ-панели

**Дата**: 2024-05-23

**Статус**: Предложено

## Контекст

Проекту FeedMaster требуется выделенная админ-панель для управления пользователями, ботами, подписками и системными метриками. Эта панель предназначена исключительно для пользователей с ролью `owner` и должна быть функционально и визуально отделена от основного пользовательского приложения.

Предыдущая попытка реализации неверно интегрировала админ-панель в существующий макет пользовательского приложения, что привело к нарушению UX (неправильные хлебные крошки) и архитектурной целостности.

## Решение

1.  **Изолированный Макет и Маршрутизация**:
    *   Админ-панель будет реализована в отдельной группе маршрутов `src/app/[locale]/admin/`.
    *   Эта группа будет иметь собственный, независимый корневой макет (`src/app/[locale]/admin/layout.tsx`), который не будет наследовать компоненты из основного приложения (такие как `AppSidebar`). Это решит проблему вложенности и обеспечит полную изоляцию.
    *   Навигация внутри админ-панели (например, боковое меню) будет специфична только для админ-раздела, как указано в `Int_admin-panel.md`.

2.  **Аутентификация и Авторизация**:
    *   Доступ ко всем маршрутам, начинающимся с `/admin/`, будет защищен. Middleware или проверка на уровне макета будет проверять наличие у пользователя активной сессии и роли `owner`.
    *   Для целей разработки, эту проверку можно будет временно отключить, не удаляя сам код.

3.  **Специфичные Компоненты**:
    *   Для админ-панели будут созданы собственные, независимые компоненты (`AdminStatsCards`, `AdminCharts` и т.д.), которые будут получать и отображать данные, описанные в `docs/Int_admin-panel.md`. Компоненты из пользовательского дашборда использоваться не будут.

4.  **Стилизация**:
    *   Админ-панель будет придерживаться цветовой схемы и UX-принципов, описанных в документации (светлая тема, акцентные цвета, иконки Lucide), для создания консистентного, но отличного от основного приложения, интерфейса.

## Последствия

**Положительные**:
*   **Четкое разделение**: Кодовая база будет чище, так как логика и компоненты пользовательского интерфейса и админ-панели полностью разделены.
*   **Безопасность**: Изолированная маршрутизация упрощает применение строгих правил авторизации для всего раздела `/admin`.
*   **Масштабируемость**: Новые разделы админ-панели можно будет добавлять без опасений затронуть основное приложение.
*   **Соответствие ТЗ**: Реализация будет полностью соответствовать предоставленной документации.

**Отрицательные**:
*   Небольшое увеличение количества файлов из-за создания отдельных компонентов и макетов. Этот недостаток незначителен по сравнению с преимуществами.
